import{_ as s,c as n,o as a,a as e}from"./app.498778bd.js";const l="/images/ci_blog/e26e76f06722b1822bea626420f60f51570464fd08589fc1711a076a3d629649.png",p="/images/ci_blog/99efcc115b99f31739ac3054a02caf90595aeca7f2b42cc47de2f39ef4212de2.png",o="/images/ci_blog/46a1d4b0e3de3c311969c46e4cf7db8a8599fb8a282eb5c39aa339b3dc042a18.png",c="/images/ci_blog/d244c34976e98218dba9be8a550eb9a33eac925164d66c913d544e7db806ffa9.png",g=JSON.parse('{"title":"Github Actions \u81EA\u52A8\u5316\u90E8\u7F72","description":"","frontmatter":{"layout":"doc","title":"Github Actions \u81EA\u52A8\u5316\u90E8\u7F72"},"headers":[{"level":1,"title":"Github Actions \u81EA\u52A8\u5316\u90E8\u7F72","slug":"github-actions-\u81EA\u52A8\u5316\u90E8\u7F72","link":"#github-actions-\u81EA\u52A8\u5316\u90E8\u7F72","children":[{"level":2,"title":"Github actions \u7B80\u4ECB","slug":"github-actions-\u7B80\u4ECB","link":"#github-actions-\u7B80\u4ECB","children":[]},{"level":2,"title":"\u90E8\u7F72\u6D41\u7A0B","slug":"\u90E8\u7F72\u6D41\u7A0B","link":"#\u90E8\u7F72\u6D41\u7A0B","children":[]}]}],"relativePath":"daily/blog/ci_blog.md","lastUpdated":1695287330000}'),i={name:"daily/blog/ci_blog.md"},r=e('<h1 id="github-actions-\u81EA\u52A8\u5316\u90E8\u7F72" tabindex="-1">Github Actions \u81EA\u52A8\u5316\u90E8\u7F72 <a class="header-anchor" href="#github-actions-\u81EA\u52A8\u5316\u90E8\u7F72" aria-hidden="true">#</a></h1><h2 id="github-actions-\u7B80\u4ECB" tabindex="-1">Github actions \u7B80\u4ECB <a class="header-anchor" href="#github-actions-\u7B80\u4ECB" aria-hidden="true">#</a></h2><p>\u79D1\u666E\u8FD8\u5F97\u770B\u962E\u4E00\u5CF0,\u5148\u770B\u770B<a href="https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noreferrer">\u962E\u4E00\u5CF0\u7684\u535A\u6587</a>,\u79D1\u666E\u4E00\u4E0B.</p><p>\u770B\u5F52\u770B,\u4F46\u662F\u8FD9\u7BC7\u6587\u7AE0\u8001\u4E86,\u91CC\u9762\u7684\u914D\u7F6E\u76EE\u524D\u6CA1\u6CD5\u7528\u4E86.\u4E86\u89E3\u4E00\u4E0B\u6982\u5FF5,\u6211\u4EEC\u5F00\u5DE5</p><h2 id="\u90E8\u7F72\u6D41\u7A0B" tabindex="-1">\u90E8\u7F72\u6D41\u7A0B <a class="header-anchor" href="#\u90E8\u7F72\u6D41\u7A0B" aria-hidden="true">#</a></h2><p><img src="'+l+`" alt="\u56FE 1"></p><h3>\u8FD9\u91CC\u9700\u8981\u505A\u4E9B\u51C6\u5907</h3><ol><li>\u51C6\u5907\u4E00\u5957\u79D8\u94A5,\u7528\u4E8E\u81EA\u52A8\u5316\u811A\u672C\u63D0\u4EA4\u4EE3\u7801\u65F6\u4F7F\u7528,<a href="https://github.com/JamesIves/github-pages-deploy-action/tree/dev#using-an-ssh-deploy-key-" target="_blank" rel="noreferrer">\u53C2\u8003\u6587\u6863</a></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># -f \u540E\u9762\u662F\u6587\u4EF6\u540D</span></span>
<span class="line"><span style="color:#676E95;"># \u6CE8\u610F\u4FEE\u6539 email \u5730\u5740</span></span>
<span class="line"><span style="color:#A6ACCD;">ssh-keygen -f my_blog -t rsa -m pem -b 4096 -C </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">youremailhere@example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> -N </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>\u751F\u6210\u4E24\u4E2A\u6587\u4EF6,\u4E00\u4E2A<code> my_blog</code>,\u4E00\u4E2A<code>my_blog.pub</code></li><li>\u5C06<code>my_blog.pub</code>\u7684\u5185\u5BB9\u590D\u5236\u4E0B\u6765,\u6DFB\u52A0\u5230<code>{username}.github.io</code>\u8FD9\u4E2A\u4ED3\u5E93\u7684 <code>deploy key</code> \u4E2D <img src="`+p+'" alt="\u56FE 2"></li><li>\u5C06<code>my_blog</code>\u7684\u5185\u5BB9\u590D\u5236\u4E0B\u6765,\u6DFB\u52A0\u5230 <code>blog\u4EE3\u7801</code>\u8FD9\u4E2A\u4ED3\u5E93\u7684 <code>secrets</code>\u4E2D,\u8FD9\u91CC\u53D6\u540D<code>DEPLOY_KEY</code>,\u5728\u811A\u672C\u4E2D\u7528 <code>secrets.DEPLOY_KEY</code> \u6765\u8BFB\u53D6\u8FD9\u4E2A\u503C <img src="'+o+'" alt="\u56FE 3"></li></ol><h3>\u6DFB\u52A0\u6253\u5305\u811A\u672C</h3><ol><li>\u5728<code>blog\u4EE3\u7801</code>\u8FD9\u4E2A\u4ED3\u5E93,\u65B0\u5EFA\u6587\u4EF6\u5939<code>.github/workflows</code></li><li>\u5728<code>.github</code>\u6587\u4EF6\u5939\u4E2D\u6DFB\u52A0\u4E00\u4E2A<code>yml</code>\u6587\u4EF6,\u6587\u4EF6\u540D\u968F\u610F <img src="'+c+`" alt="\u56FE 4"></li><li>\u6DFB\u52A0\u811A\u672C</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">name: Blog Deploy</span></span>
<span class="line"><span style="color:#A6ACCD;">permissions:</span></span>
<span class="line"><span style="color:#A6ACCD;">  contents: write</span></span>
<span class="line"><span style="color:#A6ACCD;">on:</span></span>
<span class="line"><span style="color:#A6ACCD;">  push:</span></span>
<span class="line"><span style="color:#A6ACCD;">    branches:</span></span>
<span class="line"><span style="color:#A6ACCD;">      - main</span></span>
<span class="line"><span style="color:#A6ACCD;">jobs:</span></span>
<span class="line"><span style="color:#A6ACCD;">  build-and-deploy:</span></span>
<span class="line"><span style="color:#A6ACCD;">    runs-on: ubuntu-latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    steps:</span></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Checkout</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: actions/checkout@v3</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Install and Build \u{1F527}</span></span>
<span class="line"><span style="color:#A6ACCD;">        run: |</span></span>
<span class="line"><span style="color:#A6ACCD;">          npm install</span></span>
<span class="line"><span style="color:#A6ACCD;">          npm run build</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Build and Deploy</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: JamesIves/github-pages-deploy-action@v4</span></span>
<span class="line"><span style="color:#A6ACCD;">        with:</span></span>
<span class="line"><span style="color:#A6ACCD;">          folder: docs/.vitepress/dist # \u5982\u679C vitepress \u6CA1\u6709\u914D\u7F6E outDir,\u8FD9\u91CC\u5C31\u662F\u8FD9\u4E2A\u503C,\u5982\u679C\u914D\u7F6E\u4E86 outDir ,\u8FD9\u91CC\u5C31\u586B\u5199\u6253\u5305\u8F93\u51FA\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">          clean: true</span></span>
<span class="line"><span style="color:#A6ACCD;">          ssh-key: \${{ secrets.DEPLOY_KEY }} # \u8FD9\u91CC\u5C31\u662F\u7B2C\u56DB\u6B65\u6DFB\u52A0\u7684\u53C2\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">          branch: main</span></span>
<span class="line"><span style="color:#A6ACCD;">          repository-name: ************************ # \u66FF\u6362\u6210\u81EA\u5DF1 blog \u4ED3\u5E93,\u5982 username/username.github.io</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">      - name: Invoke Cloudflare Webhook</span></span>
<span class="line"><span style="color:#A6ACCD;">        uses: distributhor/workflow-webhook@v2</span></span>
<span class="line"><span style="color:#A6ACCD;">        env:</span></span>
<span class="line"><span style="color:#A6ACCD;">          webhook_url: \${{ secrets.CLOUDFLARE_WEBHOOK_URL }}</span></span>
<span class="line"><span style="color:#A6ACCD;">          webhook_secret: &quot;Y0uR5ecr3t&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>\u811A\u672C\u89E3\u6790:</p><ol><li>\u5728\u63A8\u9001<code>main</code>\u5206\u652F\u65F6\u89E6\u53D1</li><li>\u5728 <code>ubuntu-latest</code> \u4E0A\u8FD0\u884C</li><li>\u9996\u5148\u62C9\u53D6\u4EE3\u7801</li><li>\u5B89\u88C5\u4F9D\u8D56,<code>buid</code></li><li>\u628A<code>buid</code>\u7684\u7ED3\u679C\u63A8\u9001\u5230<code>repository-name</code>\u914D\u7F6E\u7684\u4ED3\u5E93\u4E2D</li><li>\u89E6\u53D1cloudflare\u7684webhook,\u540C\u6B65\u66F4\u65B0cloudflare\u7684pages</li></ol><div class="info custom-block"><p class="custom-block-title">\u89E6\u53D1cloudflare webhook</p><p>\u6211\u5728cloudflare\u4E0A\u505A\u4E86\u4E00\u4E2A\u5907\u4EFD,\u800C\u4E14cloudflare\u7684pages\u670D\u52A1\u901F\u5EA6\u66F4\u5FEB,\u4E3A\u4E86\u540C\u6B65,\u6211\u5728\u811A\u672C\u7684\u7ED3\u5C3E\u52A0\u4E86\u4E00\u6B65,\u89E6\u53D1cloudflare \u7684webhook,\u8FD9\u6837\u5C31\u80FD\u4FDD\u8BC1\u540C\u6B65\u4E86</p></div><p>\u5728\u52A0\u4E00\u4E2A\u8BC4\u8BBA\u529F\u80FD,Blog\u5C31\u5168\u4E86,\u4E0B\u4E00\u7BC7,\u6211\u4EEC\u6765\u901A\u8FC7 Gitalk \u52A0\u4E0A\u8BC4\u8BBA\u529F\u80FD</p>`,17),t=[r];function b(d,u,m,C,h,A){return a(),n("div",null,t)}const _=s(i,[["render",b]]);export{g as __pageData,_ as default};
